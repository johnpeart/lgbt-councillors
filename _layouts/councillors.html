---
layout: default
---

{% assign dataset = site.data.councillors | sort: page.sort %}
{% assign count--councillors = 0 %}
{% assign count--local-authorities = 0 %}
{% assign local-authorities = "" | split: "," %}

<!-- ASSIGN DATES -->
{% assign now = "now" | date: "%s" | times: 1 %}

<section class="summary-data">

    <h1>All data at a glance</h1>

    <div class="summary-data">
        <p class="lead">On {{ now | date: "%d %B %Y" }}, at least:</p>
        
        {% for entry in dataset %}
          {% if entry.end-date == "present" or entry.end-date == blank %}
            {% assign count--councillors = count--councillors | plus: 1 %}
            {% assign local-authorities = local-authorities | push: entry.local-authority | uniq %}
          {% endif %}
        {% endfor %}
        
        {% for item in local-authorities %}
          {% assign count--local-authorities = count--local-authorities | plus: 1 %}
        {% endfor %}
        
        <div class="summary-block">

            <p>
                <span class="summary-total--number top-padding">{{ count--councillors }}</span>
                <span class="summary-total--label">councillors are LGBT+</span>
            </p>

            <p>
                <span class="summary-total--number">{{ count--local-authorities }}</span>
                <span class="summary-total--label">local authorities have LGBT+ councillors</span>
            </p>
            
            

        </div>

    </div>

</section>

<section class="all-councillors">
  
  <span class="sort">
    <h1>Councillors</h1>
    <p><strong>Sort by:</strong>
    <br>
    {% if page.url contains '/sort/name' %}
      Name, 
    {% else %}
      <a href="{% link councillors/by-name.md %}">Name</a>, 
    {% endif %}
    {% if page.url contains '/sort/local-authority' %}
      Local authority,
    {% else %}
      <a href="{% link councillors/by-local-authority.md %}">Local authority</a>,
    {% endif %}
    {% if page.url contains '/sort/party' %}
      Party
    {% else %}
      <a href="{% link councillors/by-party.md %}">Party</a>
    {% endif %}</p>
  </span>
  
  {% for entry in dataset %}
    {% if entry.end-date == "present" or entry.end-date == blank %}
    
    {% assign cllrName = entry.name %}
    {% assign cllrLocalAuthority = entry.local-authority %}
    {% assign cllrLocalAuthorityType = entry.local-authority-type %}
    {% assign cllrElectoralDistrict = entry.electoral-district %}
    {% assign cllrParty = entry.party %}
    {% assign cllrStartDate = entry.start-date %}
    {% assign cllrIdentity = entry.identity %}
    {% assign cllrSourceName = entry.source-description %}
    {% assign cllrSourceURL = entry.source-url %}
    {% assign cllrSourceDate = entry.source-date %}
    {% assign cllrNotes = entry.notes %}
    {% assign cllrPhoto = entry.image-local-url %}
    
  
    <details class="cllr">
      <summary>
          <div class="cllr-summary">
              <img class="cllr-portrait {{ cllrParty }}" src="{{ cllrPhoto }}" loading="lazy">
              <p class="cllr-name">{{ cllrName }}</p>
              <p class="cllr-party">{{ cllrParty }}</p>
              <p class="cllr-electoral-district">{{ cllrLocalAuthority }} {{ cllrLocalAuthorityType }}</p>
              <span class="expand-icon"></span>
          </div>
      </summary>
    
      <section class="cllr-info">
    
          <p class="gender">
              <strong class="label">First elected</strong>
              <span class="data">
                  {{ cllrStartDate }}
              </span>
          </p>
    
          <p class="identity">
              <strong class="label">Identity</strong>
              <span class="data">
                  {{ cllrIdentity | default: "LGBT+" }}
              </span>
          </p>
    
          <p class="source">
              <strong class="label">Source</strong>
              <span class="data">
                  <a href="{{ cllrSourceURL }}">{{ cllrSourceName }}</a>
              </span>
          </p>
    
          <p class="source-access-date">
              <strong class="label">Source publication date</strong>
              <span class="data">
                  {{ cllrSourceDate }}
              </span>
          </p>
    
          {% if cllrNotes %}
          <div class="cllr-notes">
              {{ cllrNotes | markdownify }}
          </div>
          {% endif %}
    
      </section>
    </details>
  
    {% endif %}
  {% endfor %}
  
</section>